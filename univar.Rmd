---
title: "EDA"
author: "Taylor Bonar & Satvik Ajmera"
date: "2022-07-24"
output: powerpoint_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


```{r}
library(tswge)
library(arrow)

btc = read_parquet(file.choose())




```

```{r}
# 132000 = 3 months + 1 week (1440 minutes)
# 121920 = 3 months + 1 day for ASE Short term
btc.threemonths= btc[1:121920,]
btc.threemonths.long= btc[1:132000,]
```



```{r}
btc.threemonths= btc[1:121920,]
Dif.60 = artrans.wge(btc.threemonths$Target,phi.tr = c(rep(0,59),1))
diff.p.q= aic5.wge(Dif.60, type = "bic") #p=0:6,q=0:6) 
best.p = diff.p.q$`   p`[1] 
best.q = diff.p.q$`   q`[1] # choose ARMA(best.p,best.q)
diff.arma.est = est.arma.wge(Dif.60, p = best.p,q = best.q)
forecast.period = 1440
diff.arma.fore = fore.aruma.wge(btc.threemonths$Target,phi = c(diff.arma.est$phi),theta = c(diff.arma.est$theta),s=60,  n.ahead = forecast.period, lastn = TRUE, limits = TRUE)
start.len = length(btc.threemonths$Target)-forecast.period+1
end.len = length(btc.threemonths$Target)
diff.arma.ASE = mean((btc.threemonths$Target[start.len:end.len] - diff.arma.fore$f)^2)
print(best.p)
print(best.q)
diff.arma.ASE
```

```{r}
btc.threemonths.long= btc[1:132000,]
Dif.60 = artrans.wge(btc.threemonths.long$Target,phi.tr = c(rep(0,59),1))
diff.p.q= aic5.wge(Dif.60, type = "bic") #p=0:6,q=0:6) 
best.p = diff.p.q$`   p`[1] 
best.q = diff.p.q$`   q`[1] # choose ARMA(best.p,best.q)
diff.arma.est = est.arma.wge(Dif.60, p = best.p,q = best.q)
forecast.period = 10080
diff.arma.fore = fore.aruma.wge(btc.threemonths.long$Target,phi = c(diff.arma.est$phi),theta = c(diff.arma.est$theta),s=60,  n.ahead = forecast.period, lastn = TRUE, limits = TRUE)
start.len = length(btc.threemonths.long$Target)-forecast.period+1
end.len = length(btc.threemonths.long$Target)
diff.arma.ASE = mean((btc.threemonths.long$Target[start.len:end.len] - diff.arma.fore$f)^2)
print(best.p)
print(best.q)
diff.arma.ASE
```

```{r}
# 132000 = 3 months + 1 week (1440 minutes)
# 121920 = 3 months + 1 day for ASE Short term
btc.threemonths= btc[1:121920,]
btc.threemonths.long= btc[1:132000,]
```



```{r}
btc.threemonths.long= btc[1:132000,]
Dif.60 = artrans.wge(btc.threemonths.long$Target,phi.tr = c(rep(0,10079),1))
diff.p.q= aic5.wge(Dif.60, type = "bic") #p=0:6,q=0:6) 
best.p = diff.p.q$`   p`[1] 
best.q = diff.p.q$`   q`[1] # choose ARMA(best.p,best.q)
diff.arma.est = est.arma.wge(Dif.60, p = best.p,q = best.q)
forecast.period = 66000
diff.arma.fore = fore.aruma.wge(btc.threemonths.long$Target,phi = c(diff.arma.est$phi),theta = c(diff.arma.est$theta),s=10080,  n.ahead = forecast.period, lastn = TRUE, limits = TRUE)
start.len = length(btc.threemonths.long$Target)-forecast.period+1
end.len = length(btc.threemonths.long$Target)
diff.arma.ASE = mean((btc.threemonths.long$Target[start.len:end.len] - diff.arma.fore$f)^2)
print(best.p)
print(best.q)
diff.arma.ASE
```
